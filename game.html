<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CRYPTO ASTEROID RUSH | BSC SPACE MISSION</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=Rajdhani:wght@400;500;600;700&family=Audiowide&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Game Styles -->
    <link rel="stylesheet" href="css/game.css">
</head>
<body>

<!-- Initial Loading Screen -->
<div id="loadingScreen">
    <div class="loading-content">
        <div class="loading-logo">
            <i class="fas fa-rocket"></i>
        </div>
        <div class="loading-title">CRYPTO ASTEROID RUSH</div>
        <div class="loading-spinner"></div>
        <div class="loading-text">INITIALIZING SYSTEMS...</div>
    </div>
</div>

<!-- Pre-Game Loading Screen (for ads) -->
<div id="preGameScreen" class="modal-overlay">
    <div class="pregame-container">
        <div class="pregame-header">
            <i class="fas fa-satellite-dish"></i>
            <span>MISSION BRIEFING</span>
        </div>
        
        <!-- Ad Container - rotates ads here -->
        <div id="adContainer" class="ad-container">
            <div class="ad-placeholder">
                <i class="fas fa-ad"></i>
                <span>Advertisement Space</span>
            </div>
        </div>
        
        <div class="pregame-loading">
            <div class="loading-bar-container">
                <div id="loadingBar" class="loading-bar"></div>
            </div>
            <div id="loadingPercent" class="loading-percent">0%</div>
            <div id="loadingStatus" class="loading-status">Loading assets...</div>
        </div>
        
        <div class="pregame-tips">
            <i class="fas fa-lightbulb"></i>
            <span id="gameTip">TIP: Destroy valuable asteroids to earn USDT!</span>
        </div>
    </div>
</div>

<!-- Game Container -->
<div id="gameContainer">
    
    <!-- Game Header -->
    <div id="gameHeader">
        <div class="header-content">
            <div class="game-title">CRYPTO ASTEROID RUSH</div>
            <div class="game-subtitle">BSC MISSION â€¢ EARN USDT</div>
        </div>
    </div>
    
    <!-- Game Stats -->
    <div id="gameStats">
        <div class="stats-container">
            <div class="stat-item">
                <div class="stat-icon"><i class="fas fa-clock"></i></div>
                <div class="stat-content">
                    <div class="stat-label">TIME</div>
                    <div id="countdown" class="stat-value">180</div>
                </div>
            </div>
            <div class="stat-item lives-stat">
                <div class="stat-icon"><i class="fas fa-heart"></i></div>
                <div class="stat-content">
                    <div class="stat-label">LIVES</div>
                    <div id="lives" class="stat-value lives-display">
                        <span class="life active"></span>
                        <span class="life active"></span>
                        <span class="life active"></span>
                        <span class="life active"></span>
                        <span class="life active"></span>
                        <span class="life active"></span>
                    </div>
                </div>
            </div>
            <div class="stat-item">
                <div class="stat-icon"><i class="fas fa-crosshairs"></i></div>
                <div class="stat-content">
                    <div class="stat-label">DESTROYED</div>
                    <div id="score" class="stat-value">0</div>
                </div>
            </div>
            <div class="stat-item earnings-stat">
                <div class="stat-icon"><i class="fas fa-coins"></i></div>
                <div class="stat-content">
                    <div class="stat-label">EARNINGS</div>
                    <div id="earned" class="stat-value">$0.0000</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Canvas -->
    <canvas id="gameCanvas"></canvas>
    
    <!-- Mobile Controls -->
    <div id="mobileControls">
        <div class="control-left">
            <div class="control-btn" id="leftBtn" data-direction="left">
                <i class="fas fa-chevron-left"></i>
            </div>
            <div class="control-btn" id="rightBtn" data-direction="right">
                <i class="fas fa-chevron-right"></i>
            </div>
        </div>
        <div class="control-right">
            <div class="control-btn fire-btn" id="fireBtn">
                <i class="fas fa-bolt"></i>
                <span>FIRE</span>
            </div>
        </div>
    </div>
    
    <!-- Audio Toggle -->
    <div id="audioToggle">
        <i id="audioIcon" class="fas fa-volume-up"></i>
    </div>
</div>

<!-- Modal: Connect Wallet -->
<div id="connectModal" class="modal-overlay active">
    <div class="modal-container connect-modal">
        <div class="modal-glow"></div>
        <div class="modal-header">
            <div class="modal-icon">
                <i class="fas fa-rocket"></i>
            </div>
            <div class="modal-title">WELCOME COMMANDER</div>
            <div class="modal-subtitle">
                Connect your MetaMask wallet on Binance Smart Chain (BSC)
                to start your asteroid destruction mission and earn USDT!
            </div>
        </div>
        <div class="btn-group">
            <button id="connectBtn" class="btn btn-primary btn-glow">
                <i class="fas fa-plug"></i>
                <span>Connect MetaMask</span>
            </button>
        </div>
        <div class="modal-footer">
            <i class="fas fa-info-circle"></i>
            <span>Mission fee: 0.00001 BNB</span>
        </div>
    </div>
</div>

<!-- Modal: Game Menu (Ship Selection) -->
<div id="gameMenuModal" class="modal-overlay">
    <div class="modal-container menu-modal">
        <div class="modal-glow"></div>
        <div class="modal-header">
            <div class="modal-icon">
                <i class="fas fa-satellite"></i>
            </div>
            <div class="modal-title">MISSION CONTROL</div>
            <div class="modal-subtitle">
                Prepare for 3 minutes of intense action.
                Destroy asteroids to collect USDT. Rare asteroids are worth more!
            </div>
        </div>
        
        <div class="wallet-info" id="connectedWalletInfo">
            <i class="fas fa-wallet"></i>
            <span>Connected:</span>
            <span id="connectedWalletText" class="wallet-address">0x...</span>
        </div>
        
        <!-- Ship Selector -->
        <div id="shipSelectorContainer">
            <div class="section-title">
                <i class="fas fa-space-shuttle"></i>
                <span>SELECT YOUR SHIP</span>
            </div>
            <div id="shipSelection" class="ship-grid">
                <!-- Ships generated dynamically -->
            </div>
            <div id="selectedShipInfo" class="selected-ship-info">
                <span class="ship-name">Select a ship for this mission</span>
            </div>
        </div>
        
        <!-- Mission Info -->
        <div class="mission-info">
            <div class="info-item">
                <i class="fas fa-heart"></i>
                <span>6 Lives</span>
            </div>
            <div class="info-item">
                <i class="fas fa-clock"></i>
                <span>180 Seconds</span>
            </div>
            <div class="info-item">
                <i class="fas fa-coins"></i>
                <span>Earn USDT</span>
            </div>
        </div>
        
        <div class="btn-group">
            <button id="startGameBtn" class="btn btn-primary btn-glow btn-large">
                <i class="fas fa-play"></i>
                <span>START MISSION</span>
                <small>0.00001 BNB</small>
            </button>
        </div>
    </div>
</div>

<!-- Modal: End Game -->
<div id="endGameModal" class="modal-overlay">
    <div class="modal-container end-modal">
        <div class="modal-glow"></div>
        <div id="endGameHeader" class="modal-header">
            <div class="modal-icon success">
                <i class="fas fa-trophy"></i>
            </div>
            <div id="endGameTitle" class="modal-title">MISSION COMPLETE!</div>
            <div id="endGameSubtitle" class="modal-subtitle">
                Great work, Commander! Check your results below.
            </div>
        </div>
        
        <div class="result-stats">
            <div class="result-item">
                <div class="result-icon"><i class="fas fa-crosshairs"></i></div>
                <div class="result-content">
                    <div class="result-label">Asteroids Destroyed</div>
                    <div id="finalScore" class="result-value">0</div>
                </div>
            </div>
            <div class="result-item highlight">
                <div class="result-icon"><i class="fas fa-coins"></i></div>
                <div class="result-content">
                    <div class="result-label">Total Earnings</div>
                    <div id="finalReward" class="result-value">$0.0000</div>
                </div>
            </div>
        </div>
        
        <div id="asteroidsBreakdown" class="asteroids-breakdown">
            <!-- Breakdown generated dynamically -->
        </div>
        
        <div class="btn-group">
            <button id="playAgainBtn" class="btn btn-primary btn-glow">
                <i class="fas fa-redo"></i>
                <span>NEW MISSION</span>
            </button>
            <button id="walletBtn" class="btn btn-secondary">
                <i class="fas fa-wallet"></i>
                <span>VIEW WALLET</span>
            </button>
        </div>
    </div>
</div>

<!-- Modal: Game Over (Lost all lives) -->
<div id="gameOverModal" class="modal-overlay">
    <div class="modal-container gameover-modal">
        <div class="modal-glow danger"></div>
        <div class="modal-header">
            <div class="modal-icon danger">
                <i class="fas fa-skull-crossbones"></i>
            </div>
            <div class="modal-title danger">MISSION FAILED</div>
            <div class="modal-subtitle">
                Your ship was destroyed! You lost all your lives and earnings.
            </div>
        </div>
        
        <div class="gameover-stats">
            <div class="stat-lost">
                <i class="fas fa-times-circle"></i>
                <span>Earnings Lost: <strong id="lostEarnings">$0.0000</strong></span>
            </div>
        </div>
        
        <div class="btn-group">
            <button id="retryBtn" class="btn btn-primary btn-glow">
                <i class="fas fa-redo"></i>
                <span>TRY AGAIN</span>
            </button>
            <button id="exitBtn" class="btn btn-secondary">
                <i class="fas fa-home"></i>
                <span>EXIT</span>
            </button>
        </div>
    </div>
</div>

<!-- Transaction Popup -->
<div id="transactionPopup" class="transaction-popup">
    <div class="transaction-content">
        <div class="transaction-icon">
            <i class="fas fa-sync-alt fa-spin"></i>
        </div>
        <h3>PROCESSING PAYMENT</h3>
        <p>Please wait while we process the blockchain transaction...</p>
        <div class="transaction-details">
            <div class="transaction-detail">
                <span class="label">Entry Fee:</span>
                <span class="value">0.00001 BNB</span>
            </div>
            <div class="transaction-detail">
                <span class="label">Network:</span>
                <span class="value">Binance Smart Chain</span>
            </div>
            <div class="transaction-detail">
                <span class="label">Status:</span>
                <span class="value" id="txStatus">Awaiting confirmation...</span>
            </div>
        </div>
        <div class="transaction-warning">
            <i class="fas fa-exclamation-triangle"></i>
            <span>Do not close this window until confirmed.</span>
        </div>
    </div>
</div>

<!-- In-Game Notification -->
<div id="notification" class="notification">
    <div class="notification-icon"><i class="fas fa-star"></i></div>
    <div class="notification-content">
        <div class="notification-title" id="notificationTitle">ASTEROID DESTROYED!</div>
        <div class="notification-message" id="notificationMessage">+$0.0001 USDT</div>
    </div>
</div>

<!-- Custom Alert Modal -->
<div id="customAlert" class="modal-overlay custom-alert">
    <div class="alert-container">
        <div class="alert-icon" id="alertIcon">
            <i class="fas fa-info-circle"></i>
        </div>
        <div class="alert-title" id="alertTitle">Notice</div>
        <div class="alert-message" id="alertMessage">Message here</div>
        <button id="alertOkBtn" class="btn btn-primary">OK</button>
    </div>
</div>

<!-- Custom Confirm Modal -->
<div id="customConfirm" class="modal-overlay custom-confirm">
    <div class="confirm-container">
        <div class="confirm-icon" id="confirmIcon">
            <i class="fas fa-question-circle"></i>
        </div>
        <div class="confirm-title" id="confirmTitle">Confirm</div>
        <div class="confirm-message" id="confirmMessage">Are you sure?</div>
        <div class="confirm-buttons">
            <button id="confirmYesBtn" class="btn btn-primary">YES</button>
            <button id="confirmNoBtn" class="btn btn-secondary">NO</button>
        </div>
    </div>
</div>

<!-- JavaScript Modules -->
<script src="js/game-config.js"></script>
<script src="js/game-anticheat.js"></script>
<script src="js/game-ships.js"></script>
<script src="js/game-audio.js"></script>
<script src="js/game-ui.js"></script>
<script src="js/game-session-manager.js"></script> 
<script src="js/game-session.js"></script>
<script src="js/game-wallet.js"></script>
<script src="js/game-engine.js"></script>
<script src="js/ship-renderer.js"></script>
<script src="js/game-renderer.js"></script>
<script src="js/game-start.js"></script>
<script src="js/game-main.js"></script>
</body>
</html>
