<!DOCTYPE html>
<html lang="pt-BR" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>UNOBIX | MISSÃO ESPACIAL</title>
    <meta name="description" content="Destrua asteroides e ganhe R$ de verdade! Jogo espacial gratuito.">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=Rajdhani:wght@400;500;600;700&family=Audiowide&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    
    <!-- hCaptcha -->
    <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
    
    <!-- Game Styles -->
    <link rel="stylesheet" href="css/game.css">
</head>
<body>

<!-- Tela de Carregamento Inicial -->
<div id="loadingScreen">
    <div class="loading-content">
        <div class="loading-logo">
            <img src="img/logo-unobix.png" alt="Unobix">
        </div>
        <div class="loading-title">UNOBIX</div>
        <div class="loading-spinner"></div>
        <div class="loading-text">INICIALIZANDO SISTEMAS...</div>
    </div>
</div>

<!-- Tela Pré-Jogo (para anúncios) -->
<div id="preGameScreen" class="modal-overlay">
    <div class="pregame-container">
        <div class="pregame-header">
            <i class="fas fa-satellite-dish"></i>
            <span>BRIEFING DA MISSÃO</span>
        </div>
        
        <!-- Container de Anúncio -->
        <div id="adContainer" class="ad-container">
            <div class="ad-placeholder">
                <i class="fas fa-ad"></i>
                <span>Espaço para Anúncio</span>
            </div>
            <div class="ad-timer" id="adTimer">5s</div>
        </div>
        
        <div class="pregame-loading">
            <div class="loading-bar-container">
                <div id="loadingBar" class="loading-bar"></div>
            </div>
            <div id="loadingPercent" class="loading-percent">0%</div>
            <div id="loadingStatus" class="loading-status">Carregando recursos...</div>
        </div>
        
        <div class="pregame-tips">
            <i class="fas fa-lightbulb"></i>
            <span id="gameTip">DICA: Destrua asteroides raros para ganhar mais R$!</span>
        </div>
    </div>
</div>

<!-- Container do Jogo -->
<div id="gameContainer">
    
    <!-- Header do Jogo -->
    <div id="gameHeader">
        <div class="header-content">
            <div class="game-title">UNOBIX</div>
            <div class="game-subtitle">MISSÃO ESPACIAL • GANHE R$</div>
        </div>
    </div>
    
    <!-- Stats do Jogo -->
    <div id="gameStats">
        <div class="stats-container">
            <div class="stat-item">
                <div class="stat-icon"><i class="fas fa-clock"></i></div>
                <div class="stat-content">
                    <div class="stat-label">TEMPO</div>
                    <div id="countdown" class="stat-value">180</div>
                </div>
            </div>
            <div class="stat-item lives-stat">
                <div class="stat-icon"><i class="fas fa-heart"></i></div>
                <div class="stat-content">
                    <div class="stat-label">VIDAS</div>
                    <div id="lives" class="stat-value lives-display">
                        <span class="life active"></span>
                        <span class="life active"></span>
                        <span class="life active"></span>
                        <span class="life active"></span>
                        <span class="life active"></span>
                        <span class="life active"></span>
                    </div>
                </div>
            </div>
            <div class="stat-item">
                <div class="stat-icon"><i class="fas fa-crosshairs"></i></div>
                <div class="stat-content">
                    <div class="stat-label">DESTRUÍDOS</div>
                    <div id="score" class="stat-value">0</div>
                </div>
            </div>
            <div class="stat-item earnings-stat">
                <div class="stat-icon"><i class="fas fa-coins"></i></div>
                <div class="stat-content">
                    <div class="stat-label">GANHOS</div>
                    <div id="earned" class="stat-value">R$ 0,00</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Canvas do Jogo -->
    <canvas id="gameCanvas"></canvas>
    
    <!-- Controles Mobile -->
    <div id="mobileControls">
        <div class="control-left">
            <div class="control-btn" id="leftBtn" data-direction="left">
                <i class="fas fa-chevron-left"></i>
            </div>
            <div class="control-btn" id="rightBtn" data-direction="right">
                <i class="fas fa-chevron-right"></i>
            </div>
        </div>
        <div class="control-right">
            <div class="control-btn fire-btn" id="fireBtn">
                <i class="fas fa-bolt"></i>
                <span>FOGO</span>
            </div>
        </div>
    </div>
    
    <!-- Toggle de Áudio -->
    <div id="audioToggle">
        <i id="audioIcon" class="fas fa-volume-up"></i>
    </div>
</div>

<!-- Modal: Login com Google -->
<div id="connectModal" class="modal-overlay active">
    <div class="modal-container connect-modal">
        <div class="modal-glow"></div>
        <div class="modal-header">
            <div class="modal-icon">
                <i class="fas fa-rocket"></i>
            </div>
            <div class="modal-title">BEM-VINDO COMANDANTE</div>
            <div class="modal-subtitle">
                Entre com sua conta Google para iniciar sua missão de destruição
                de asteroides e ganhar R$ de verdade!
            </div>
        </div>
        <div class="btn-group">
            <button id="connectBtn" class="btn btn-primary btn-glow btn-large">
                <i class="fab fa-google"></i>
                <span>Entrar com Google</span>
            </button>
        </div>
        <div class="modal-footer">
            <i class="fas fa-info-circle"></i>
            <span>100% Gratuito • Sem taxas de entrada</span>
        </div>
    </div>
</div>

<!-- Modal: Menu do Jogo (Seleção de Nave) -->
<div id="gameMenuModal" class="modal-overlay">
    <div class="modal-container menu-modal">
        <div class="modal-glow"></div>
        <div class="modal-header">
            <div class="modal-icon">
                <i class="fas fa-satellite"></i>
            </div>
            <div class="modal-title">CONTROLE DA MISSÃO</div>
            <div class="modal-subtitle">
                Prepare-se para 3 minutos de ação intensa.
                Destrua asteroides para coletar R$. Asteroides raros valem mais!
            </div>
        </div>
        
        <!-- Info do Usuário -->
        <div class="user-info" id="connectedUserInfo">
            <img id="userPhoto" src="" alt="">
            <span id="userName">Usuário</span>
        </div>
        
        <!-- Badge de Hard Mode (40% das missões) -->
        <div id="hardModeBadge" class="hard-mode-badge" style="display: none;">
            <i class="fas fa-fire"></i>
            <span>MODO DIFÍCIL</span>
        </div>
        
        <!-- Seletor de Nave -->
        <div id="shipSelectorContainer">
            <div class="section-title">
                <i class="fas fa-space-shuttle"></i>
                <span>SELECIONE SUA NAVE</span>
            </div>
            <div id="shipSelection" class="ship-grid">
                <!-- Naves geradas dinamicamente -->
            </div>
            <div id="selectedShipInfo" class="selected-ship-info">
                <span class="ship-name">Selecione uma nave para a missão</span>
            </div>
        </div>
        
        <!-- Info da Missão -->
        <div class="mission-info">
            <div class="info-item">
                <i class="fas fa-heart"></i>
                <span>6 Vidas</span>
            </div>
            <div class="info-item">
                <i class="fas fa-clock"></i>
                <span>180 Segundos</span>
            </div>
            <div class="info-item">
                <i class="fas fa-coins"></i>
                <span>Ganhe R$</span>
            </div>
        </div>
        
        <div class="btn-group">
            <button id="startGameBtn" class="btn btn-primary btn-glow btn-large">
                <i class="fas fa-play"></i>
                <span>INICIAR MISSÃO</span>
                <small>GRÁTIS</small>
            </button>
        </div>
    </div>
</div>

<!-- Modal: Fim de Jogo (Vitória) -->
<div id="endGameModal" class="modal-overlay">
    <div class="modal-container end-modal">
        <div class="modal-glow"></div>
        <div id="endGameHeader" class="modal-header">
            <div class="modal-icon success">
                <i class="fas fa-trophy"></i>
            </div>
            <div id="endGameTitle" class="modal-title">MISSÃO COMPLETA!</div>
            <div id="endGameSubtitle" class="modal-subtitle">
                Excelente trabalho, Comandante! Confira seus resultados abaixo.
            </div>
        </div>
        
        <!-- Resultados -->
        <div class="result-stats">
            <div class="result-item">
                <div class="result-icon"><i class="fas fa-crosshairs"></i></div>
                <div class="result-content">
                    <div class="result-label">Asteroides Destruídos</div>
                    <div id="finalScore" class="result-value">0</div>
                </div>
            </div>
            <div class="result-item highlight">
                <div class="result-icon"><i class="fas fa-coins"></i></div>
                <div class="result-content">
                    <div class="result-label">Ganhos Totais</div>
                    <div id="finalReward" class="result-value">R$ 0,00</div>
                </div>
            </div>
        </div>
        
        <!-- Breakdown de Asteroides -->
        <div id="asteroidsBreakdown" class="asteroids-breakdown">
            <!-- Breakdown gerado dinamicamente -->
        </div>
        
        <!-- CAPTCHA (obrigatório na vitória) -->
        <div id="captchaContainer" class="captcha-container">
            <div class="captcha-title">
                <i class="fas fa-shield-alt"></i>
                <span>Verificação de Segurança</span>
            </div>
            <div id="captchaWidget">
                <!-- hCaptcha widget será inserido aqui -->
            </div>
            <div id="captchaStatus" class="captcha-status"></div>
        </div>
        
        <!-- Saldo Atualizado -->
        <div class="balance-update" id="balanceUpdate" style="display: none;">
            <div class="balance-icon"><i class="fas fa-wallet"></i></div>
            <div class="balance-info">
                <div class="balance-label">Novo Saldo</div>
                <div class="balance-value" id="newBalance">R$ 0,00</div>
            </div>
        </div>
        
        <div class="btn-group">
            <button id="claimRewardBtn" class="btn btn-primary btn-glow" disabled>
                <i class="fas fa-check"></i>
                <span>RESGATAR GANHOS</span>
            </button>
            <button id="playAgainBtn" class="btn btn-secondary" style="display: none;">
                <i class="fas fa-redo"></i>
                <span>NOVA MISSÃO</span>
            </button>
            <button id="walletBtn" class="btn btn-secondary" style="display: none;">
                <i class="fas fa-wallet"></i>
                <span>VER CARTEIRA</span>
            </button>
        </div>
    </div>
</div>

<!-- Modal: Game Over (Perdeu todas as vidas) -->
<div id="gameOverModal" class="modal-overlay">
    <div class="modal-container gameover-modal">
        <div class="modal-glow danger"></div>
        <div class="modal-header">
            <div class="modal-icon danger">
                <i class="fas fa-skull-crossbones"></i>
            </div>
            <div class="modal-title danger">MISSÃO FALHOU</div>
            <div class="modal-subtitle">
                Sua nave foi destruída! Você perdeu todas as vidas e ganhos.
            </div>
        </div>
        
        <div class="gameover-stats">
            <div class="stat-lost">
                <i class="fas fa-times-circle"></i>
                <span>Ganhos Perdidos: <strong id="lostEarnings">R$ 0,00</strong></span>
            </div>
        </div>
        
        <div class="btn-group">
            <button id="retryBtn" class="btn btn-primary btn-glow">
                <i class="fas fa-redo"></i>
                <span>TENTAR NOVAMENTE</span>
            </button>
            <button id="exitBtn" class="btn btn-secondary">
                <i class="fas fa-home"></i>
                <span>SAIR</span>
            </button>
        </div>
    </div>
</div>

<!-- Popup de Processamento -->
<div id="transactionPopup" class="transaction-popup">
    <div class="transaction-content">
        <div class="transaction-icon">
            <i class="fas fa-sync-alt fa-spin"></i>
        </div>
        <h3>PROCESSANDO</h3>
        <p>Aguarde enquanto registramos seus resultados...</p>
        <div class="transaction-details">
            <div class="transaction-detail">
                <span class="label">Status:</span>
                <span class="value" id="txStatus">Verificando CAPTCHA...</span>
            </div>
        </div>
        <div class="transaction-warning">
            <i class="fas fa-exclamation-triangle"></i>
            <span>Não feche esta janela.</span>
        </div>
    </div>
</div>

<!-- Notificação In-Game -->
<div id="notification" class="notification">
    <div class="notification-icon"><i class="fas fa-star"></i></div>
    <div class="notification-content">
        <div class="notification-title" id="notificationTitle">ASTEROIDE DESTRUÍDO!</div>
        <div class="notification-message" id="notificationMessage">+R$ 0,001</div>
    </div>
</div>

<!-- Modal de Alerta Customizado -->
<div id="customAlert" class="modal-overlay custom-alert">
    <div class="alert-container">
        <div class="alert-icon" id="alertIcon">
            <i class="fas fa-info-circle"></i>
        </div>
        <div class="alert-title" id="alertTitle">Aviso</div>
        <div class="alert-message" id="alertMessage">Mensagem aqui</div>
        <button id="alertOkBtn" class="btn btn-primary">OK</button>
    </div>
</div>

<!-- Modal de Confirmação Customizado -->
<div id="customConfirm" class="modal-overlay custom-confirm">
    <div class="confirm-container">
        <div class="confirm-icon" id="confirmIcon">
            <i class="fas fa-question-circle"></i>
        </div>
        <div class="confirm-title" id="confirmTitle">Confirmar</div>
        <div class="confirm-message" id="confirmMessage">Tem certeza?</div>
        <div class="confirm-buttons">
            <button id="confirmYesBtn" class="btn btn-primary">SIM</button>
            <button id="confirmNoBtn" class="btn btn-secondary">NÃO</button>
        </div>
    </div>
</div>

<!-- JavaScript Modules -->
<script src="js/firebase-config.js"></script>
<script src="js/auth-manager.js"></script>
<script src="js/game-config.js"></script>
<script src="js/game-anticheat.js"></script>
<script src="js/game-ships.js"></script>
<script src="js/game-audio.js"></script>
<script src="js/game-ui.js"></script>
<script src="js/game-session-manager.js"></script>
<script src="js/game-session.js"></script>
<script src="js/captcha-manager.js"></script>
<script src="js/ads-manager.js"></script>
<script src="js/game-engine.js"></script>
<script src="js/ship-renderer.js"></script>
<script src="js/game-renderer.js"></script>
<script src="js/game-start.js"></script>
<script src="js/game-main.js"></script>
</body>
</html>
